{
  "session_id": "8f62699d-8b82-46bf-a73a-ca635bf58821",
  "prompts": [
    "/commit sdlc_planner feature {\"number\": \"youtube-migration\", \"title\": \"YouTube Analyzer Migration - Port to Jerry as Specialized Workflow\", \"body\": \"## Summary\\n\\nMigrate the existing YouTube analysis workflow from user-level Claude Code agents to Jerry's project structure. Update agents to use the bundled pattern executor instead of Fabric CLI.\\n\\n## Parent Issue\\n\\nThis is Phase 5 of `issue-jerry-patterns-content-analysis.md`\\n\\n## Dependencies\\n\\n- Requires: `issue-generic-analysis-adw.md` (Phase 4) completed\\n\\n## Source Files (User-Level)\\n\\nCurrent location: `~/.claude/agents/youtube/`\\n\\n| Agent | Purpose | Model |\\n|-------|---------|-------|\\n| metadata-extractor.md | Extract video metadata + transcript | haiku |\\n| core-analyzer-haiku.md | Run 8 core patterns (fast) | haiku |\\n| core-analyzer-sonnet.md | Run 8 core patterns (deep) | sonnet |\\n| conditional-analyzer.md | Run content-type patterns | sonnet |\\n| report-aggregator.md | Generate reports | haiku |\\n| audio-summarizer.md | Generate TTS summary | haiku |\\n| html-generator.md | Generate HTML dashboard | - |\\n\\nOrchestrators: `~/.claude/agents/youtube-orchestrator.md`, `youtube-analyzer-haiku.md`, `youtube-analyzer-sonnet.md`\\n\\nCommands: `~/.claude/commands/yt_*.md` (6 commands)\\n\\n## Deliverables\\n\\n### 1. Migrate Agents to Jerry\\n\\nMove and update agents to `.claude/agents/youtube/`:\\n\\n```\\n.claude/agents/youtube/\\n\\u251c\\u2500\\u2500 metadata-extractor.md      # Updated: paths to Jerry structure\\n\\u251c\\u2500\\u2500 core-analyzer.md           # MERGED: haiku + sonnet into single with mode\\n\\u251c\\u2500\\u2500 conditional-analyzer.md    # Updated: use pattern_executor\\n\\u251c\\u2500\\u2500 report-aggregator.md       # Updated: paths\\n\\u251c\\u2500\\u2500 audio-summarizer.md        # Updated: optional TTS dependency\\n\\u251c\\u2500\\u2500 html-generator.md          # Moved from parent dir\\n\\u2514\\u2500\\u2500 orchestrator.md            # MERGED: single orchestrator with mode\\n```\\n\\n### 2. Key Updates to Agents\\n\\n**All Agents:**\\n- Update hardcoded paths to use `$JERRY_ROOT` or relative paths\\n- Update Fabric CLI calls to use `pattern_executor.execute_pattern()`\\n- Update output paths to `agents/{adw_id}/youtube/{video_id}/`\\n\\n**core-analyzer.md (merged):**\\n```markdown\\n# Input includes mode: quick|full\\n# quick \\u2192 haiku model, core patterns only\\n# full \\u2192 sonnet model, all patterns\\n```\\n\\n**conditional-analyzer.md:**\\n```python\\n# Before (Fabric CLI)\\ncat transcript.txt | fabric --pattern extract_technical_content > patterns/extract_technical_content.md\\n\\n# After (pattern_executor)\\nfrom adw_modules.pattern_executor import execute_pattern\\nresult = execute_pattern(\\\"extract_technical_content\\\", transcript_text)\\nPath(\\\"patterns/extract_technical_content.md\\\").write_text(result.output)\\n```\\n\\n### 3. Create YouTube ADW (`adw_youtube_iso.py`)\\n\\nSpecialized wrapper around `adw_analyze_iso.py`:\\n\\n```python\\n#!/usr/bin/env -S uv run\\n\\\"\\\"\\\"\\nADW YouTube Iso - YouTube-specific analysis workflow\\n\\nUsage:\\n  uv run adw_youtube_iso.py <youtube-url> [options]\\n\\nOptions:\\n  --mode       quick|full (default: full)\\n  --output-dir Output directory\\n  --no-audio   Skip audio summary generation\\n  --no-html    Skip HTML dashboard generation\\n\\\"\\\"\\\"\\n```\\n\\nFeatures:\\n- YouTube-specific pattern selection\\n- Content type classification (technical/educational/general)\\n- Conditional pattern execution based on content type\\n- HTML dashboard generation\\n- Audio summary generation (optional)\\n\\n### 4. Migrate Commands\\n\\nMove and update commands to `.claude/commands/`:\\n\\n| Command | File | Description |\\n|---------|------|-------------|\\n| /yt_analyze | yt_analyze.md | Main YouTube analysis |\\n| /yt_quick | yt_quick.md | Quick analysis (haiku) |\\n| /yt_full | yt_full.md | Full analysis (sonnet) |\\n| /yt_metadata | yt_metadata.md | Metadata extraction only |\\n\\nRemove (consolidate):\\n- `/yt_core` \\u2192 merged into `/yt_analyze --quick`\\n- `/yt_status` \\u2192 use standard ADW state\\n- `/yt_help` \\u2192 use `/help youtube`\\n\\n### 5. Update Output Structure\\n\\n```\\nagents/{adw_id}/youtube/{video_id}/\\n\\u251c\\u2500\\u2500 metadata.json              # Video metadata\\n\\u251c\\u2500\\u2500 transcript.txt             # Full transcript\\n\\u251c\\u2500\\u2500 content-type.txt           # Classification\\n\\u251c\\u2500\\u2500 patterns/                  # Pattern outputs\\n\\u2502   \\u251c\\u2500\\u2500 extract_wisdom.md\\n\\u2502   \\u251c\\u2500\\u2500 youtube_summary.md\\n\\u2502   \\u2514\\u2500\\u2500 ...\\n\\u251c\\u2500\\u2500 ANALYSIS_SUMMARY.md        # Executive summary\\n\\u251c\\u2500\\u2500 aggregated-report.md       # Full report\\n\\u251c\\u2500\\u2500 README.md                  # Navigation\\n\\u251c\\u2500\\u2500 index.html                 # Interactive dashboard\\n\\u251c\\u2500\\u2500 audio-summary.txt          # Summary text\\n\\u2514\\u2500\\u2500 audio-summary.mp3          # TTS audio (optional)\\n```\\n\\n### 6. TTS Integration (Optional)\\n\\nAudio summary depends on TTS utilities. Make it gracefully optional:\\n\\n```python\\ndef generate_audio_summary(summary_text: str, output_path: str) -> bool:\\n    \\\"\\\"\\\"Generate audio summary if TTS is available.\\\"\\\"\\\"\\n    tts_utils = [\\n        (\\\"elevenlabs\\\", os.getenv(\\\"ELEVENLABS_API_KEY\\\")),\\n        (\\\"openai\\\", os.getenv(\\\"OPENAI_API_KEY\\\")),\\n        (\\\"say\\\", shutil.which(\\\"say\\\")),  # macOS built-in\\n    ]\\n\\n    for name, available in tts_utils:\\n        if available:\\n            return run_tts(name, summary_text, output_path)\\n\\n    logger.warning(\\\"No TTS available, skipping audio summary\\\")\\n    return False\\n```\\n\\n## Acceptance Criteria\\n\\n- [ ] All YouTube agents migrated to `.claude/agents/youtube/`\\n- [ ] Agents updated to use `pattern_executor` instead of Fabric CLI\\n- [ ] `adw_youtube_iso.py` created and functional\\n- [ ] Commands migrated to `.claude/commands/`\\n- [ ] Output structure matches specification\\n- [ ] Quick mode completes in <90 seconds\\n- [ ] Full mode completes in <180 seconds\\n- [ ] Audio summary is optional (no failure if TTS unavailable)\\n- [ ] HTML dashboard generated correctly\\n- [ ] No hardcoded user paths remain\\n\\n## Migration Testing\\n\\nTest with known video:\\n```bash\\n# Quick analysis\\n./adws/adw_youtube_iso.py \\\"https://youtube.com/watch?v=OIKTsVjTVJE\\\" --mode quick\\n\\n# Full analysis\\n./adws/adw_youtube_iso.py \\\"https://youtube.com/watch?v=OIKTsVjTVJE\\\" --mode full\\n```\\n\\nCompare outputs with original implementation.\\n\\n## Files to Create/Modify\\n\\n**Create:**\\n- `.claude/agents/youtube/` (directory)\\n- `.claude/agents/youtube/metadata-extractor.md`\\n- `.claude/agents/youtube/core-analyzer.md`\\n- `.claude/agents/youtube/conditional-analyzer.md`\\n- `.claude/agents/youtube/report-aggregator.md`\\n- `.claude/agents/youtube/audio-summarizer.md`\\n- `.claude/agents/youtube/html-generator.md`\\n- `.claude/agents/youtube/orchestrator.md`\\n- `adws/adw_youtube_iso.py`\\n- `.claude/commands/yt_analyze.md`\\n- `.claude/commands/yt_quick.md`\\n- `.claude/commands/yt_full.md`\\n- `.claude/commands/yt_metadata.md`\\n\\n**Modify:**\\n- None (all new files, old ones stay at user level)\"}"
  ]
}