{
  "session_id": "705a8a1b-28ad-4f78-a1d9-d1d9cbc573fe",
  "prompts": [
    "/feature pattern-executor 4d650f33 {\"number\": \"pattern-executor\", \"title\": \"Pattern Executor Module - Execute Bundled Patterns via Claude SDK\", \"body\": \"## Summary\\n\\nCreate the pattern execution module that runs bundled Fabric patterns using the Claude Code SDK. This replaces the runtime Fabric CLI dependency with self-contained pattern execution.\\n\\n## Parent Issue\\n\\nThis is Phase 2 of `issue-jerry-patterns-content-analysis.md`\\n\\n## Dependencies\\n\\n- Requires: `issue-pattern-infrastructure.md` (Phase 1) completed\\n\\n## Deliverables\\n\\n### 1. Pattern Executor Module (`adw_modules/pattern_executor.py`)\\n\\nCore functions:\\n\\n```python\\n@dataclass\\nclass PatternResult:\\n    pattern: str\\n    success: bool\\n    output: str\\n    execution_time: float\\n    error: Optional[str] = None\\n\\ndef get_pattern_prompt(pattern_name: str) -> str:\\n    \\\"\\\"\\\"Load pattern system prompt from bundled patterns.\\\"\\\"\\\"\\n\\ndef execute_pattern(\\n    pattern_name: str,\\n    input_text: str,\\n    model: str = \\\"haiku\\\"\\n) -> PatternResult:\\n    \\\"\\\"\\\"Execute a single pattern against input text via Claude SDK.\\\"\\\"\\\"\\n\\ndef execute_patterns_parallel(\\n    patterns: list[str],\\n    input_text: str,\\n    model: str = \\\"haiku\\\",\\n    max_workers: int = 4,\\n) -> dict[str, PatternResult]:\\n    \\\"\\\"\\\"Execute multiple patterns in parallel.\\\"\\\"\\\"\\n\\ndef list_available_patterns() -> dict:\\n    \\\"\\\"\\\"List all bundled patterns with metadata.\\\"\\\"\\\"\\n\\ndef get_patterns_for_content_type(content_type: str) -> list[str]:\\n    \\\"\\\"\\\"Get recommended patterns for a content type.\\\"\\\"\\\"\\n\\ndef validate_pattern_exists(pattern_name: str) -> bool:\\n    \\\"\\\"\\\"Check if a pattern is available in the bundle.\\\"\\\"\\\"\\n```\\n\\n### 2. Claude SDK Integration\\n\\nUse `agent_sdk.simple_query()` for pattern execution:\\n\\n```python\\nfrom .agent_sdk import simple_query\\n\\ndef execute_pattern(pattern_name: str, input_text: str, model: str = \\\"haiku\\\") -> PatternResult:\\n    system_prompt = get_pattern_prompt(pattern_name)\\n    full_prompt = f\\\"{system_prompt}\\\\n\\\\n# INPUT\\\\n\\\\n{input_text}\\\"\\n    output = simple_query(full_prompt, model=model)\\n    return PatternResult(pattern=pattern_name, success=True, output=output, ...)\\n```\\n\\n### 3. Parallel Execution\\n\\nUse ThreadPoolExecutor for concurrent pattern execution:\\n- Default 4 workers (configurable)\\n- Track execution time per pattern\\n- Aggregate results in dict\\n- Handle individual failures gracefully\\n\\n### 4. Pattern Discovery Functions\\n\\n```python\\ndef get_patterns_by_category(category: str) -> list[str]:\\n    \\\"\\\"\\\"Get all patterns in a category.\\\"\\\"\\\"\\n\\ndef search_patterns(query: str) -> list[str]:\\n    \\\"\\\"\\\"Search patterns by name or description.\\\"\\\"\\\"\\n\\ndef get_pattern_info(pattern_name: str) -> dict:\\n    \\\"\\\"\\\"Get full metadata for a pattern.\\\"\\\"\\\"\\n```\\n\\n## Acceptance Criteria\\n\\n- [ ] `pattern_executor.py` module created in `adw_modules/`\\n- [ ] `execute_pattern()` successfully runs bundled patterns\\n- [ ] `execute_patterns_parallel()` runs multiple patterns concurrently\\n- [ ] `list_available_patterns()` returns manifest data\\n- [ ] Error handling for missing/invalid patterns\\n- [ ] Execution time tracking works correctly\\n- [ ] Unit tests for core functions\\n\\n## Technical Notes\\n\\n- All pattern execution uses Claude Code SDK (no external dependencies)\\n- Patterns are loaded from `.jerry/patterns/{category}/{name}/system.md`\\n- Model selection: \\\"haiku\\\" for speed, \\\"sonnet\\\" for depth\\n- Parallel execution respects rate limits\\n\\n## Test Cases\\n\\n```python\\n# Test single pattern execution\\nresult = execute_pattern(\\\"extract_wisdom\\\", \\\"Sample text content\\\")\\nassert result.success\\nassert len(result.output) > 0\\n\\n# Test parallel execution\\nresults = execute_patterns_parallel(\\n    [\\\"extract_wisdom\\\", \\\"extract_insights\\\", \\\"rate_content\\\"],\\n    \\\"Sample text content\\\"\\n)\\nassert len(results) == 3\\nassert all(r.success for r in results.values())\\n\\n# Test pattern listing\\npatterns = list_available_patterns()\\nassert \\\"extract_wisdom\\\" in patterns[\\\"patterns\\\"]\\n```\\n\\n## Files to Create/Modify\\n\\n**Create:**\\n- `adws/adw_modules/pattern_executor.py`\\n\\n**Modify:**\\n- `adws/adw_modules/__init__.py` (export new module)\"}"
  ]
}