{
  "session_id": "3fa9b993-ae54-4155-bb72-cf95d045a8fe",
  "prompts": [
    "# IDENTITY and PURPOSE\n\nYou are an expert technical content extractor specializing in identifying code, tools, frameworks, commands, configurations, and technical resources from developer-focused content.\n\nTake a step back and think step-by-step about how to extract all technical elements that would be valuable for developers implementing the discussed concepts.\n\n# STEPS\n\n- Identify all programming languages, frameworks, and tools mentioned\n- Extract code snippets, commands, and configurations with context\n- Capture setup instructions and dependencies\n- Extract repository links, documentation, and external resources\n- Note technical concepts and architectural patterns discussed\n- Identify potential automation opportunities\n\n# OUTPUT INSTRUCTIONS\n\n- Only output Markdown\n- All sections are required (use \"None identified\" if a section has no content)\n- Format code snippets with proper markdown code blocks and language identifiers\n- Include line numbers or timestamps where snippets appear if available\n- Ensure all URLs and links are complete and clickable\n- Do not give warnings or notes; only output the requested sections\n\n# OUTPUT SECTIONS\n\n## TECH_STACK\n\n### Languages\n- [Language name] - [Context of use]\n\n### Frameworks & Libraries\n- [Framework/library name] - [Version if mentioned] - [Purpose/use case]\n\n### Tools & Platforms\n- [Tool name] - [Purpose] - [Link if mentioned]\n\n### Services & APIs\n- [Service name] - [Integration context]\n\n## CODE_SNIPPETS\n\n### Snippet [N]: [Brief description]\n**Context**: [When/why this code appears]\n**Timestamp**: [HH:MM:SS if available]\n\n```[language]\n[Code snippet exactly as shown/discussed]\n```\n\n**Explanation**: [What this code does]\n**Key Points**: [Important details or gotchas]\n\n[Repeat for each snippet]\n\n## COMMANDS & SCRIPTS\n\n### Installation & Setup\n```bash\n[Installation commands]\n```\n\n### Configuration\n```bash\n[Configuration commands]\n```\n\n### Execution & Testing\n```bash\n[Runtime commands]\n```\n\n### Deployment\n```bash\n[Deployment commands if discussed]\n```\n\n## TECHNICAL_CONCEPTS\n\n### Architectural Patterns\n- [Pattern name]: [Brief explanation] - [Why it's used]\n\n### Design Principles\n- [Principle]: [How it's applied]\n\n### Best Practices\n- [Practice]: [Context and reasoning]\n\n### Common Pitfalls\n- [Pitfall]: [How to avoid]\n\n## DEPENDENCIES & REQUIREMENTS\n\n### System Requirements\n- [Requirement]: [Specification]\n\n### Package Dependencies\n- [Package name]: [Version] - [Purpose]\n\n### Environment Variables\n```bash\n[Variable name]=[Description of value needed]\n```\n\n### Prerequisites\n- [Prerequisite]: [Why it's needed]\n\n## RESOURCES & LINKS\n\n### Official Documentation\n- [Resource name]: [URL]\n\n### Repository Links\n- [Repo name]: [URL] - [What it contains]\n\n### Related Tools & Extensions\n- [Tool name]: [URL] - [Purpose]\n\n### Learning Resources\n- [Resource]: [URL] - [What you'll learn]\n\n### Community & Support\n- [Community/Forum]: [URL]\n\n## CONFIGURATION_FILES\n\n### [Filename]\n**Purpose**: [What this config does]\n**Location**: [Where to place it]\n\n```[format]\n[Configuration content]\n```\n\n[Repeat for each config file]\n\n## WORKFLOW_STEPS\n\n### Setup Process\n1. [Step with relevant commands/actions]\n2. [Step with relevant commands/actions]\n\n### Development Workflow\n1. [Step with relevant commands/actions]\n2. [Step with relevant commands/actions]\n\n### Testing & Validation\n1. [Step with relevant commands/actions]\n2. [Step with relevant commands/actions]\n\n### Deployment Process\n1. [Step with relevant commands/actions]\n2. [Step with relevant commands/actions]\n\n## AUTOMATION_OPPORTUNITIES\n\n- [Workflow that could be automated]: [How it could be automated]\n- [Repetitive task]: [Automation approach]\n- [Manual process]: [Script/tool that could help]\n\n## TECHNICAL_NOTES\n\n### Performance Considerations\n- [Note about performance implications]\n\n### Security Considerations\n- [Security best practices or warnings]\n\n### Compatibility Notes\n- [Version compatibility or platform-specific notes]\n\n### Troubleshooting Tips\n- [Common issue]: [Solution]\n\n## QUICK_REFERENCE\n\n### Essential Commands\n```bash\n# [Description]\n[command]\n\n# [Description]\n[command]\n```\n\n### Key File Locations\n- [File/directory]: [Path] - [Purpose]\n\n### Important URLs\n- [Purpose]: [URL]\n\n# INPUT\n\nINPUT:\n\n\n# INPUT\n\n# Cell 1 (markdown)\n# Building Custom Skills for Claude\n\nLearn how to create, deploy, and manage custom skills to extend Claude's capabilities with your organization's specialized knowledge and workflows.\n\n---\n\n# Cell 2 (markdown)\n## Table of Contents\n\n1. [Introduction & Setup](#introduction)\n2. [Understanding Custom Skills Architecture](#architecture)\n3. [Example 1: Financial Ratio Calculator](#financial-ratio)\n4. [Example 2: Company Brand Guidelines](#brand-guidelines)\n5. [Example 3: Financial Modeling Suite](#financial-modeling)\n6. [Skill Management & Versioning](#management)\n7. [Best Practices & Production Tips](#best-practices)\n8. [Troubleshooting](#troubleshooting)\n\n---\n\n# Cell 3 (markdown)\n## 1. Introduction & Setup {#introduction}\n\n### What are Custom Skills?\n\n**Custom skills** are specialized expertise packages you create to teach Claude your organization's unique workflows, domain knowledge, and best practices. Unlike Anthropic's pre-built skills (Excel, PowerPoint, PDF), custom skills allow you to:\n\n- **Codify organizational knowledge** - Capture your team's specific methodologies\n- **Ensure consistency** - Apply the same standards across all interactions\n- **Automate complex workflows** - Chain together multi-step processes\n- **Maintain intellectual property** - Keep proprietary methods secure\n\n### Key Benefits\n\n| Benefit | Description |\n|---------|-------------|\n| **Expertise at Scale** | Deploy specialized knowledge to every Claude interaction |\n| **Version Control** | Track changes and roll back if needed |\n| **Composability** | Combine multiple skills for complex tasks |\n| **Privacy** | Your skills remain private to your organization |\n\n### Prerequisites\n\nBefore starting, ensure you have:\n- Completed [Notebook 1: Introduction to Skills](01_skills_introduction.ipynb)\n- An Anthropic API key with Skills beta access\n- Python environment with the local SDK installed\n\n---\n\n# Cell 4 (markdown)\n### Environment Setup\n\nLet's set up our environment and import necessary libraries:\n\n---\n\n# Cell 5 (code)\n```python\nimport os\nimport sys\nfrom pathlib import Path\nfrom typing import Any\n\n# Add parent directory for imports\nsys.path.insert(0, str(Path.cwd().parent))\n\nfrom anthropic import Anthropic\nfrom anthropic.lib import files_from_dir\nfrom dotenv import load_dotenv\n\n# Import our utilities\nfrom file_utils import (\n    download_all_files,\n    extract_file_ids,\n    print_download_summary,\n)\n\n# We'll create skill_utils later in this notebook\n# from skill_utils import (\n#     create_skill,\n#     list_skills,\n#     delete_skill,\n#     test_skill\n# )\n\n# Load environment variables\nload_dotenv(Path.cwd().parent / \".env\")\n\nAPI_KEY = os.getenv(\"ANTHROPIC_API_KEY\")\nMODEL = os.getenv(\"ANTHROPIC_MODEL\", \"claude-sonnet-4-5\")\n\nif not API_KEY:\n    raise ValueError(\n        \"ANTHROPIC_API_KEY not found. Copy ../.env.example to ../.env and add your API key.\"\n    )\n\n# Initialize client with Skills beta\nclient = Anthropic(api_key=API_KEY, default_headers={\"anthropic-beta\": \"skills-2025-10-02\"})\n\n# Setup directories\nSKILLS_DIR = Path.cwd().parent / \"custom_skills\"\nOUTPUT_DIR = Path.cwd().parent / \"outputs\"\nOUTPUT_DIR.mkdir(exist_ok=True)\n\nprint(\"\u2713 API key loaded\")\nprint(f\"\u2713 Using model: {MODEL}\")\nprint(f\"\u2713 Custom skills directory: {SKILLS_DIR}\")\nprint(f\"\u2713 Output directory: {OUTPUT_DIR}\")\nprint(\"\\n\ud83d\udcdd Skills beta header configured for skill management\")\n```\n\n---\n\n# Cell 6 (markdown)\n## 2. Understanding Custom Skills Architecture {#architecture}\n\n### Skill Structure\n\nEvery custom skill follows this directory structure:\n\n```\nskill_name/\n\u251c\u2500\u2500 SKILL.md           # REQUIRED: Instructions with YAML frontmatter\n\u251c\u2500\u2500 *.md               # Optional: Any additional .md files (documentation, guides)\n\u251c\u2500\u2500 scripts/           # Optional: Executable code\n\u2502   \u251c\u2500\u2500 process.py\n\u2502   \u2514\u2500\u2500 utils.js\n\u2514\u2500\u2500 resources/         # Optional: Templates, data files\n    \u2514\u2500\u2500 template.xlsx\n```\n\n**Important:** \n- **SKILL.md is the ONLY required file** - everything else is optional\n- **Multiple .md files allowed** - You can have any number of markdown files in the top-level folder\n- **All .md files are loaded** - Not just SKILL.md and REFERENCE.md, but any .md file you include\n- **Organize as needed** - Use multiple .md files to structure complex documentation\n\n\ud83d\udcd6 Read our engineering blog post on [Equipping agents for the real world with Skills](https://www.anthropic.com/engineering/equipping-agents-for-the-real-world-with-agent-skills)\n\n### Skills Are Not Just Markdown\n\n![Skills Can Include Scripts and Files](../assets/not-just-markdown.png)\n\nSkills can bundle various file types:\n- **Markdown files**: Instructions and documentation (SKILL.md, REFERENCE.md, etc.)\n- **Scripts**: Python, JavaScript, or other executable code for complex operations\n- **Templates**: Pre-built files that can be customized (Excel templates, document templates)\n- **Resources**: Supporting data files, configuration, or assets\n\n### SKILL.md Requirements\n\nThe `SKILL.md` file must include:\n\n1. **YAML Frontmatter** (name: 64 chars, description: 1024 chars)\n   - `name`: Lowercase alphanumeric with hyphens (required)\n   - `description`: Brief description of what the skill does (required)\n\n2. **Instructions** (markdown format)\n   - Clear guidance for Claude\n   - Examples of usage\n   - Any constraints or rules\n   - Recommended: Keep under 5,000 tokens\n\n### Additional Documentation Files\n\nYou can include multiple markdown files for better organization:\n\n```\nskill_name/\n\u251c\u2500\u2500 SKILL.md           # Main instructions (required)\n\u251c\u2500\u2500 REFERENCE.md       # API reference (optional)\n\u251c\u2500\u2500 EXAMPLES.md        # Usage examples (optional)\n\u251c\u2500\u2500 TROUBLESHOOTING.md # Common issues (optional)\n\u2514\u2500\u2500 CHANGELOG.md       # Version history (optional)\n```\n\nAll `.md` files in the root directory will be available to Claude when the skill is loaded.\n\n### Bundled Files Example\n\n![Bundled Files in Skills](../assets/skills-bundled-files.png)\n\nThis example shows how Skills can bundle multiple files:\n- **SKILL.md**: Contains the main instructions with colors, typography, and sections\n- **slide-decks.md**: Additional documentation for specific use cases\n- **Scripts and resources**: Can be referenced and used during skill execution\n\n### Progressive Disclosure\n\nSkills load in three stages to optimize token usage:\n\n| Stage | Content | Token Cost | When Loaded |\n|-------|---------|------------|-------------|\n| **1. Metadata** | Name & description | name: 64 chars, description: 1024 chars | Always visible |\n| **2. Instructions** | All .md files | <5,000 tokens recommended | When relevant |\n| **3. Resources** | Scripts & files | As needed | During execution |\n\n### API Workflow\n\n```python\n# 1. Create skill\nskill = client.beta.skills.create(\n    display_title=\"My Skill\",\n    files=files_from_dir(\"path/to/skill\")\n)\n\n# 2. Use in messages\nresponse = client.beta.messages.create(\n    container={\n        \"skills\": [{\n            \"type\": \"custom\",\n            \"skill_id\": skill.id,\n            \"version\": \"latest\"\n        }]\n    },\n    # ... rest of message parameters\n)\n```\n\n### Best Practices\n\nFor detailed guidance on skill creation and best practices, see:\n- [Claude Skills Best Practices](https://docs.claude.com/en/docs/agents-and-tools/agent-skills/best-practices)\n- [Skills Documentation](https://docs.claude.com/en/docs/agents-and-tools/agent-skills/overview)\n\n---\n\n# Cell 7 (markdown)\n### Create Skill Utility Functions\n\nLet's create helper functions for skill management:\n\n---\n\n# Cell 8 (code)\n```python\ndef create_skill(client: Anthropic, skill_path: str, display_title: str) -> dict[str, Any]:\n    \"\"\"\n    Create a new custom skill from a directory.\n\n    Args:\n        client: Anthropic client instance\n        skill_path: Path to skill directory\n        display_title: Human-readable skill name\n\n    Returns:\n        Dictionary with skill_id, version, and metadata\n    \"\"\"\n    try:\n        # Create skill using files_from_dir\n        skill = client.beta.skills.create(\n            display_title=display_title, files=files_from_dir(skill_path)\n        )\n\n        return {\n            \"success\": True,\n            \"skill_id\": skill.id,\n            \"display_title\": skill.display_title,\n            \"latest_version\": skill.latest_version,\n            \"created_at\": skill.created_at,\n            \"source\": skill.source,\n        }\n    except Exception as e:\n        return {\"success\": False, \"error\": str(e)}\n\n\ndef list_custom_skills(client: Anthropic) -> list[dict[str, Any]]:\n    \"\"\"\n    List all custom skills in the workspace.\n\n    Returns:\n        List of skill dictionaries\n    \"\"\"\n    try:\n        skills_response = client.beta.skills.list(source=\"custom\")\n\n        skills = []\n        for skill in skills_response.data:\n            skills.append(\n                {\n                    \"skill_id\": skill.id,\n                    \"display_title\": skill.display_title,\n                    \"latest_version\": skill.latest_version,\n                    \"created_at\": skill.created_at,\n                    \"updated_at\": skill.updated_at,\n                }\n            )\n\n        return skills\n    except Exception as e:\n        print(f\"Error listing skills: {e}\")\n        return []\n\n\ndef delete_skill(client: Anthropic, skill_id: str) -> bool:\n    \"\"\"\n    Delete a custom skill and all its versions.\n\n    Args:\n        client: Anthropic client\n        skill_id: ID of skill to delete\n\n    Returns:\n        True if successful, False otherwise\n    \"\"\"\n    try:\n        # First delete all versions\n        versions = client.beta.skills.versions.list(skill_id=skill_id)\n\n        for version in versions.data:\n            client.beta.skills.versions.delete(skill_id=skill_id, version=version.version)\n\n        # Then delete the skill itself\n        client.beta.skills.delete(skill_id)\n        return True\n\n    except Exception as e:\n        print(f\"Error deleting skill: {e}\")\n        return False\n\n\ndef test_skill(\n    client: Anthropic,\n    skill_id: str,\n    test_prompt: str,\n    model: str = \"claude-sonnet-4-5\",\n) -> Any:\n    \"\"\"\n    Test a custom skill with a prompt.\n\n    Args:\n        client: Anthropic client\n        skill_id: ID of skill to test\n        test_prompt: Prompt to test the skill\n        model: Model to use for testing\n\n    Returns:\n        Response from Claude\n    \"\"\"\n    response = client.beta.messages.create(\n        model=model,\n        max_tokens=4096,\n        container={\"skills\": [{\"type\": \"custom\", \"skill_id\": skill_id, \"version\": \"latest\"}]},\n        tools=[{\"type\": \"code_execution_20250825\", \"name\": \"code_execution\"}],\n        messages=[{\"role\": \"user\", \"content\": test_prompt}],\n        betas=[\n            \"code-execution-2025-08-25\",\n            \"files-api-2025-04-14\",\n            \"skills-2025-10-02\",\n        ],\n    )\n\n    return response\n\n\nprint(\"\u2713 Skill utility functions defined\")\nprint(\"  - create_skill()\")\nprint(\"  - list_custom_skills()\")\nprint(\"  - delete_skill()\")\nprint(\"  - test_skill()\")\n```\n\n---\n\n# Cell 9 (markdown)\n### Check Existing Custom Skills\n\nLet's see if any custom skills already exist in your workspace:\n\n---\n\n# Cell 10 (markdown)\n### \u26a0\ufe0f Important: Clean Up Existing Skills Before Starting\n\nIf you're re-running this notebook, you may have skills from a previous session. Skills cannot have duplicate display titles, so you have three options:\n\n1. **Delete existing skills** (recommended for testing) - Clean slate approach\n2. **Use different display titles** - Add timestamps or version numbers to names\n3. **Update existing skills with new versions** - See [Skill Management & Versioning](#management) section\n\nLet's check for and optionally clean up existing skills:\n\n---\n\n# Cell 11 (code)\n```python\n# Check for existing skills that might conflict\nexisting_skills = list_custom_skills(client)\nskill_titles_to_create = [\n    \"Financial Ratio Analyzer\",\n    \"Corporate Brand Guidelines\",\n    \"Financial Modeling Suite\",\n]\nconflicting_skills = []\n\nif existing_skills:\n    print(f\"Found {len(existing_skills)} existing custom skill(s):\")\n    for skill in existing_skills:\n        print(f\"  - {skill['display_title']} (ID: {skill['skill_id']})\")\n        if skill[\"display_title\"] in skill_titles_to_create:\n            conflicting_skills.append(skill)\n\n    if conflicting_skills:\n        print(\n            f\"\\n\u26a0\ufe0f Found {len(conflicting_skills)} skill(s) that will conflict with this notebook:\"\n        )\n        for skill in conflicting_skills:\n            print(f\"  - {skill['display_title']} (ID: {skill['skill_id']})\")\n\n        print(\"\\n\" + \"=\" * 70)\n        print(\"To clean up these skills and start fresh, uncomment and run:\")\n        print(\"=\" * 70)\n        print(\"\\n# UNCOMMENT THE LINES BELOW TO DELETE CONFLICTING SKILLS:\")\n        print(\"# for skill in conflicting_skills:\")\n        print(\"#     if delete_skill(client, skill['skill_id']):\")\n        print(\"#         print(f\\\"\u2705 Deleted: {skill['display_title']}\\\")\")\n        print(\"#     else:\")\n        print(\"#         print(f\\\"\u274c Failed to delete: {skill['display_title']}\\\")\")\n\n        # for skill in conflicting_skills:\n        #     if delete_skill(client, skill['skill_id']):\n        #         print(f\"\u2705 Deleted: {skill['display_title']}\")\n        #     else:\n        #         print(f\"\u274c Failed to delete: {skill['display_title']}\")\n    else:\n        print(\"\\n\u2705 No conflicting skills found. Ready to proceed!\")\nelse:\n    print(\"\u2705 No existing custom skills found. Ready to create new ones!\")\n```\n\n---\n\n# Cell 12 (markdown)\n## 3. Example 1: Financial Ratio Calculator {#financial-ratio}\n\nLet's create our first custom skill - a financial ratio calculator that can analyze company financial health.\n\n### Skill Overview\n\nThe **Financial Ratio Calculator** skill will:\n- Calculate key financial ratios (ROE, P/E, Current Ratio, etc.)\n- Interpret ratios with industry context\n- Generate formatted reports\n- Work with various data formats (CSV, JSON, text)\n\n---\n\n# Cell 13 (markdown)\n### Upload the Financial Analyzer Skill\n\nNow let's upload our financial analyzer skill to Claude:\n\n---\n\n# Cell 14 (code)\n```python\n# Upload the Financial Analyzer skill\nfinancial_skill_path = SKILLS_DIR / \"analyzing-financial-statements\"\n\nif financial_skill_path.exists():\n    print(\"Uploading Financial Analyzer skill...\")\n    result = create_skill(client, str(financial_skill_path), \"Financial Ratio Analyzer\")\n\n    if result[\"success\"]:\n        financial_skill_id = result[\"skill_id\"]\n        print(\"\u2705 Skill uploaded successfully!\")\n        print(f\"   Skill ID: {financial_skill_id}\")\n        print(f\"   Version: {result['latest_version']}\")\n        print(f\"   Created: {result['created_at']}\")\n    else:\n        print(f\"\u274c Upload failed: {result['error']}\")\n        if \"cannot reuse an existing display_title\" in str(result[\"error\"]):\n            print(\"\\n\ud83d\udca1 Solution: A skill with this name already exists.\")\n            print(\"   Run the 'Clean Up Existing Skills' cell above to delete it first,\")\n            print(\"   or change the display_title to something unique.\")\nelse:\n    print(f\"\u26a0\ufe0f Skill directory not found: {financial_skill_path}\")\n    print(\n        \"Please ensure the custom_skills directory contains the analyzing-financial-statements folder.\"\n    )\n```\n\n---\n\n# Cell 15 (markdown)\n### Test the Financial Analyzer Skill\n\nLet's test the skill with sample financial data:\n\n---\n\n# Cell 16 (code)\n```python\n# Test the Financial Analyzer skill\nif \"financial_skill_id\" in locals():\n    test_prompt = \"\"\"\n    Calculate financial ratios for this company:\n\n    Income Statement:\n    - Revenue: $1,000M\n    - EBITDA: $200M\n    - Net Income: $120M\n\n    Balance Sheet:\n    - Total Assets: $2,000M\n    - Current Assets: $500M\n    - Current Liabilities: $300M\n    - Total Debt: $400M\n    - Shareholders Equity: $1,200M\n\n    Market Data:\n    - Share Price: $50\n    - Shares Outstanding: 100M\n\n    Please calculate key ratios and provide analysis.\n    \"\"\"\n\n    print(\"Testing Financial Analyzer skill...\")\n    response = test_skill(client, financial_skill_id, test_prompt)\n\n    # Print response\n    for content in response.content:\n        if content.type == \"text\":\n            print(content.text)\nelse:\n    print(\"\u26a0\ufe0f Please upload the Financial Analyzer skill first (run the previous cell)\")\n```\n\n---\n\n# Cell 17 (markdown)\n## 4. Example 2: Company Brand Guidelines {#brand-guidelines}\n\nNow let's create a skill that ensures all documents follow corporate brand standards.\n\n### Skill Overview\n\nThe **Brand Guidelines** skill will:\n- Apply consistent colors, fonts, and layouts\n- Ensure logo placement and usage\n- Maintain professional tone and messaging\n- Work across all document types (Excel, PowerPoint, PDF)\n\n---\n\n# Cell 18 (code)\n```python\n# Upload the Brand Guidelines skill\nbrand_skill_path = SKILLS_DIR / \"applying-brand-guidelines\"\n\nif brand_skill_path.exists():\n    print(\"Uploading Brand Guidelines skill...\")\n    result = create_skill(client, str(brand_skill_path), \"Corporate Brand Guidelines\")\n\n    if result[\"success\"]:\n        brand_skill_id = result[\"skill_id\"]\n        print(\"\u2705 Skill uploaded successfully!\")\n        print(f\"   Skill ID: {brand_skill_id}\")\n        print(f\"   Version: {result['latest_version']}\")\n    else:\n        print(f\"\u274c Upload failed: {result['error']}\")\n        if \"cannot reuse an existing display_title\" in str(result[\"error\"]):\n            print(\"\\n\ud83d\udca1 Solution: A skill with this name already exists.\")\n            print(\"   Run the 'Clean Up Existing Skills' cell above to delete it first,\")\n            print(\"   or change the display_title to something unique.\")\nelse:\n    print(f\"\u26a0\ufe0f Skill directory not found: {brand_skill_path}\")\n```\n\n---\n\n# Cell 19 (markdown)\n### Test Brand Guidelines with Document Creation\n\nLet's test the brand skill by creating a branded PowerPoint presentation:\n\n---\n\n# Cell 20 (code)\n```python\n# Test Brand Guidelines skill with PowerPoint creation\nif \"brand_skill_id\" in locals():\n    # Combine brand skill with Anthropic's pptx skill\n    response = client.beta.messages.create(\n        model=MODEL,\n        max_tokens=4096,\n        container={\n            \"skills\": [\n                {\"type\": \"custom\", \"skill_id\": brand_skill_id, \"version\": \"latest\"},\n                {\"type\": \"anthropic\", \"skill_id\": \"pptx\", \"version\": \"latest\"},\n            ]\n        },\n        tools=[{\"type\": \"code_execution_20250825\", \"name\": \"code_execution\"}],\n        messages=[\n            {\n                \"role\": \"user\",\n                \"content\": \"\"\"Create a 3-slide PowerPoint presentation following Acme Corporation brand guidelines:\n\n            Slide 1: Title slide for \"Q4 2025 Results\"\n            Slide 2: Revenue Overview with a chart showing Q1-Q4 growth\n            Slide 3: Key Achievements (3 bullet points)\n\n            Apply all brand colors, fonts, and formatting standards.\n            \"\"\",\n            }\n        ],\n        betas=[\n            \"code-execution-2025-08-25\",\n            \"files-api-2025-04-14\",\n            \"skills-2025-10-02\",\n        ],\n    )\n\n    print(\"Response from Claude:\")\n    for content in response.content:\n        if content.type == \"text\":\n            print(content.text[:500] + \"...\" if len(content.text) > 500 else content.text)\n\n    # Download generated file\n    file_ids = extract_file_ids(response)\n    if file_ids:\n        results = download_all_files(\n            client, response, output_dir=str(OUTPUT_DIR), prefix=\"branded_\"\n        )\n        print_download_summary(results)\nelse:\n    print(\"\u26a0\ufe0f Please upload the Brand Guidelines skill first\")\n```\n\n---\n\n# Cell 21 (markdown)\n## 5. Example 3: Financial Modeling Suite {#financial-modeling}\n\nLet's create our most advanced skill - a comprehensive financial modeling suite for valuation and risk analysis.\n\n### Skill Overview\n\nThe **Financial Modeling Suite** skill provides:\n- **DCF Valuation**: Complete discounted cash flow models\n- **Sensitivity Analysis**: Test impact of variables on valuation\n- **Monte Carlo Simulation**: Risk modeling with probability distributions\n- **Scenario Planning**: Best/base/worst case analysis\n\nThis demonstrates a multi-file skill with complex calculations and professional-grade financial modeling.\n\n---\n\n# Cell 22 (markdown)\n### Upload the Financial Modeling Suite \n\nFirst, upload the financial modeling skill:\n\n---\n\n# Cell 23 (code)\n```python\n# Upload the Financial Modeling Suite skill\nmodeling_skill_path = SKILLS_DIR / \"creating-financial-models\"\n\nif modeling_skill_path.exists():\n    print(\"Uploading Financial Modeling Suite skill...\")\n    result = create_skill(client, str(modeling_skill_path), \"Financial Modeling Suite\")\n\n    if result[\"success\"]:\n        modeling_skill_id = result[\"skill_id\"]\n        print(\"\u2705 Skill uploaded successfully!\")\n        print(f\"   Skill ID: {modeling_skill_id}\")\n        print(f\"   Version: {result['latest_version']}\")\n        print(\"\\nThis skill includes:\")\n        print(\"   - DCF valuation model (dcf_model.py)\")\n        print(\"   - Sensitivity analysis framework (sensitivity_analysis.py)\")\n        print(\"   - Monte Carlo simulation capabilities\")\n        print(\"   - Scenario planning tools\")\n    else:\n        print(f\"\u274c Upload failed: {result['error']}\")\nelse:\n    print(f\"\u26a0\ufe0f Skill directory not found: {modeling_skill_path}\")\n    print(\n        \"Please ensure the custom_skills directory contains the creating-financial-models folder.\"\n    )\n```\n\n---\n\n# Cell 24 (markdown)\n### Test the Financial Modeling Suite\n\nLet's test the advanced modeling capabilities with a DCF valuation request:\n\n---\n\n# Cell 25 (code)\n```python\n# Test the Financial Modeling Suite with a DCF valuation\nif \"modeling_skill_id\" in locals():\n    dcf_test_prompt = \"\"\"\n    Perform a DCF valuation for TechCorp with the following data:\n\n    Historical Financials (Last 3 Years):\n    - Revenue: $500M, $600M, $750M\n    - EBITDA Margin: 25%, 27%, 30%\n    - CapEx: $50M, $55M, $60M\n    - Working Capital: 15% of revenue\n\n    Projections:\n    - Revenue growth: 20% for years 1-3, then declining to 5% by year 5\n    - EBITDA margin expanding to 35% by year 5\n    - Terminal growth rate: 3%\n\n    Market Assumptions:\n    - WACC: 10%\n    - Tax rate: 25%\n    - Current net debt: $200M\n    - Shares outstanding: 100M\n\n    Please create a complete DCF model with sensitivity analysis on WACC and terminal growth.\n    Generate an Excel file with the full model including:\n    1. Revenue projections\n    2. Free cash flow calculations\n    3. Terminal value\n    4. Enterprise value to equity value bridge\n    5. Sensitivity table\n    \"\"\"\n\n    print(\"Testing Financial Modeling Suite with DCF valuation...\")\n    print(\"=\" * 70)\n    print(\"\\n\u23f1\ufe0f Note: Complex financial model generation may take 1-2 minutes.\\n\")\n\n    response = client.beta.messages.create(\n        model=MODEL,\n        max_tokens=4096,\n        container={\n            \"skills\": [\n                {\"type\": \"custom\", \"skill_id\": modeling_skill_id, \"version\": \"latest\"},\n                {\"type\": \"anthropic\", \"skill_id\": \"xlsx\", \"version\": \"latest\"},\n            ]\n        },\n        tools=[{\"type\": \"code_execution_20250825\", \"name\": \"code_execution\"}],\n        messages=[{\"role\": \"user\", \"content\": dcf_test_prompt}],\n        betas=[\n            \"code-execution-2025-08-25\",\n            \"files-api-2025-04-14\",\n            \"skills-2025-10-02\",\n        ],\n    )\n\n    # Print Claude's response\n    for content in response.content:\n        if content.type == \"text\":\n            # Print first 800 characters to keep output manageable\n            text = content.text\n            if len(text) > 800:\n                print(text[:800] + \"\\n\\n[... Output truncated for brevity ...]\")\n            else:\n                print(text)\n\n    # Download the DCF model if generated\n    file_ids = extract_file_ids(response)\n    if file_ids:\n        print(\"\\n\" + \"=\" * 70)\n        print(\"Downloading generated DCF model...\")\n        results = download_all_files(\n            client, response, output_dir=str(OUTPUT_DIR), prefix=\"dcf_model_\"\n        )\n        print_download_summary(results)\n        print(\"\\n\ud83d\udca1 Open the Excel file to explore the complete DCF valuation model!\")\nelse:\n    print(\"\u26a0\ufe0f Please upload the Financial Modeling Suite skill first (run the previous cell)\")\n```\n\n---\n\n# Cell 26 (markdown)\n## 6. Skill Management & Versioning {#management}\n\nManaging skills over time requires understanding versioning, updates, and lifecycle management.\n\n### Listing Your Skills\n\nGet an overview of all custom skills in your workspace:\n\n---\n\n# Cell 27 (code)\n```python\n# List all your custom skills\nmy_skills = list_custom_skills(client)\n\nif my_skills:\n    print(f\"You have {len(my_skills)} custom skill(s):\\n\")\n    print(\"=\" * 70)\n    for i, skill in enumerate(my_skills, 1):\n        print(f\"\\n{i}. {skill['display_title']}\")\n        print(f\"   Skill ID: {skill['skill_id']}\")\n        print(f\"   Current Version: {skill['latest_version']}\")\n        print(f\"   Created: {skill['created_at']}\")\n        if skill.get(\"updated_at\"):\n            print(f\"   Last Updated: {skill['updated_at']}\")\n    print(\"\\n\" + \"=\" * 70)\nelse:\n    print(\"No custom skills found in your workspace.\")\n```\n\n---\n\n# Cell 28 (markdown)\n### Creating New Versions\n\nSkills support versioning to maintain history and enable rollback. Let's make an enhancement to our Financial Analyzer skill and create a new version.\n\n#### Step 1: Enhance the Financial Analyzer\n\nWe'll add **healthcare industry** benchmarks to make our skill more versatile. This is a real-world scenario where you'd expand a skill's capabilities based on user needs.\n\n---\n\n# Cell 29 (code)\n```python\n# Add healthcare industry benchmarks to the Financial Analyzer\n# This demonstrates a realistic skill enhancement scenario\n\nif \"financial_skill_id\" in locals():\n    # Read the current interpret_ratios.py file\n    interpret_file_path = SKILLS_DIR / \"analyzing-financial-statements\" / \"interpret_ratios.py\"\n\n    with open(interpret_file_path) as f:\n        content = f.read()\n\n    # Add healthcare benchmarks after the 'manufacturing' section\n    healthcare_benchmarks = \"\"\"        },\n        'healthcare': {\n            'current_ratio': {'excellent': 2.3, 'good': 1.8, 'acceptable': 1.4, 'poor': 1.0},\n            'debt_to_equity': {'excellent': 0.3, 'good': 0.6, 'acceptable': 1.0, 'poor': 1.8},\n            'roe': {'excellent': 0.22, 'good': 0.16, 'acceptable': 0.11, 'poor': 0.07},\n            'gross_margin': {'excellent': 0.65, 'good': 0.45, 'acceptable': 0.30, 'poor': 0.20},\n            'pe_ratio': {'undervalued': 18, 'fair': 28, 'growth': 40, 'expensive': 55}\n        \"\"\"\n\n    # Find the position after manufacturing section and before the closing brace\n    insert_pos = content.find(\"        }\\n    }\")  # Find the end of the BENCHMARKS dict\n\n    if insert_pos != -1:\n        # Insert the healthcare benchmarks\n        new_content = content[:insert_pos] + healthcare_benchmarks + content[insert_pos:]\n\n        # Save the enhanced file\n        with open(interpret_file_path, \"w\") as f:\n            f.write(new_content)\n\n        print(\"\u2705 Enhanced Financial Analyzer with healthcare industry benchmarks\")\n        print(\"\\nChanges made:\")\n        print(\"  - Added healthcare industry to BENCHMARKS\")\n        print(\"  - Includes specific thresholds for:\")\n        print(\"    \u2022 Current ratio (liquidity)\")\n        print(\"    \u2022 Debt-to-equity (leverage)\")\n        print(\"    \u2022 ROE (profitability)\")\n        print(\"    \u2022 Gross margin\")\n        print(\"    \u2022 P/E ratio (valuation)\")\n        print(\"\\n\ud83d\udcdd Now we can create a new version of the skill with this enhancement!\")\n    else:\n        print(\"\u26a0\ufe0f Could not find the correct position to insert healthcare benchmarks\")\n        print(\"The file structure may have changed.\")\nelse:\n    print(\"\u26a0\ufe0f Please upload the Financial Analyzer skill first (run cells in Section 3)\")\n```\n\n---\n\n# Cell 30 (markdown)\n#### Step 2: Create a New Version\n\nNow that we've enhanced our skill, let's create a new version to track this change:\n\n---\n\n# Cell 31 (code)\n```python\n# Create a new version of the enhanced Financial Analyzer skill\ndef create_skill_version(client: Anthropic, skill_id: str, skill_path: str):\n    \"\"\"Create a new version of an existing skill.\"\"\"\n    try:\n        version = client.beta.skills.versions.create(\n            skill_id=skill_id, files=files_from_dir(skill_path)\n        )\n        return {\n            \"success\": True,\n            \"version\": version.version,\n            \"created_at\": version.created_at,\n        }\n    except Exception as e:\n        return {\"success\": False, \"error\": str(e)}\n\n\n# Create the new version with our healthcare enhancement\nif \"financial_skill_id\" in locals():\n    print(\"Creating new version of Financial Analyzer with healthcare benchmarks...\")\n\n    result = create_skill_version(\n        client, financial_skill_id, str(SKILLS_DIR / \"analyzing-financial-statements\")\n    )\n\n    if result[\"success\"]:\n        print(\"\u2705 New version created successfully!\")\n        print(f\"   Version: {result['version']}\")\n        print(f\"   Created: {result['created_at']}\")\n        print(\"\\n\ud83d\udcca Version History:\")\n        print(\"   v1: Original skill with tech, retail, financial, manufacturing\")\n        print(f\"   v{result['version']}: Enhanced with healthcare industry benchmarks\")\n    else:\n        print(f\"\u274c Version creation failed: {result['error']}\")\nelse:\n    print(\"\u26a0\ufe0f Please run the previous cells to upload the skill and make enhancements first\")\n```\n\n---\n\n# Cell 32 (markdown)\n#### Step 3: Test the New Version\n\nLet's verify our enhancement works by analyzing a healthcare company:\n\n---\n\n# Cell 33 (code)\n```python\n# Test the enhanced skill with healthcare industry data\nif \"financial_skill_id\" in locals():\n    healthcare_test_prompt = \"\"\"\n    Analyze this healthcare company using the healthcare industry benchmarks:\n\n    Company: MedTech Solutions (Healthcare Industry)\n\n    Income Statement:\n    - Revenue: $800M\n    - EBITDA: $320M\n    - Net Income: $160M\n\n    Balance Sheet:\n    - Total Assets: $1,200M\n    - Current Assets: $400M\n    - Current Liabilities: $200M\n    - Total Debt: $300M\n    - Shareholders Equity: $700M\n\n    Market Data:\n    - Share Price: $75\n    - Shares Outstanding: 50M\n\n    Please calculate key ratios and provide healthcare-specific analysis.\n    \"\"\"\n\n    print(\"Testing enhanced Financial Analyzer with healthcare company...\")\n    print(\"=\" * 70)\n\n    response = test_skill(client, financial_skill_id, healthcare_test_prompt, MODEL)\n\n    # Print Claude's analysis\n    for content in response.content:\n        if content.type == \"text\":\n            # Print first 1000 characters to keep output manageable\n            text = content.text\n            if len(text) > 1000:\n                print(text[:1000] + \"\\n\\n[... Output truncated for brevity ...]\")\n            else:\n                print(text)\n\n    print(\n        \"\\n\u2705 The skill now recognizes 'healthcare' as an industry and applies specific benchmarks!\"\n    )\nelse:\n    print(\"\u26a0\ufe0f Please run the previous cells to create the enhanced version first\")\n```\n\n---\n\n# Cell 34 (markdown)\n### Cleanup: Managing Your Skills\n\nWhen you're done testing or need to clean up your workspace, you can selectively remove skills. Let's review what we've created and provide options for cleanup:\n\n---\n\n# Cell 35 (code)\n```python\n# Comprehensive skill cleanup with detailed reporting\ndef review_and_cleanup_skills(client, dry_run=True):\n    \"\"\"\n    Review all skills and optionally clean up the ones created in this notebook.\n\n    Args:\n        client: Anthropic client\n        dry_run: If True, only show what would be deleted without actually deleting\n    \"\"\"\n    # Get all current skills\n    all_skills = list_custom_skills(client)\n\n    # Skills we created in this notebook\n    notebook_skill_names = [\n        \"Financial Ratio Analyzer\",\n        \"Corporate Brand Guidelines\",\n        \"Financial Modeling Suite\",\n    ]\n\n    # Track skills created by this notebook\n    notebook_skills = []\n    other_skills = []\n\n    for skill in all_skills:\n        if skill[\"display_title\"] in notebook_skill_names:\n            notebook_skills.append(skill)\n        else:\n            other_skills.append(skill)\n\n    print(\"=\" * 70)\n    print(\"SKILL INVENTORY REPORT\")\n    print(\"=\" * 70)\n\n    print(f\"\\nTotal custom skills in workspace: {len(all_skills)}\")\n\n    if notebook_skills:\n        print(f\"\\n\ud83d\udcda Skills created by this notebook ({len(notebook_skills)}):\")\n        for skill in notebook_skills:\n            print(f\"   \u2022 {skill['display_title']}\")\n            print(f\"     ID: {skill['skill_id']}\")\n            print(f\"     Version: {skill['latest_version']}\")\n            print(f\"     Created: {skill['created_at']}\")\n    else:\n        print(\"\\n\u2705 No skills from this notebook found\")\n\n    if other_skills:\n        print(f\"\\n\ud83d\udd27 Other skills in workspace ({len(other_skills)}):\")\n        for skill in other_skills:\n            print(f\"   \u2022 {skill['display_title']} (v{skill['latest_version']})\")\n\n    # Cleanup options\n    if notebook_skills:\n        print(\"\\n\" + \"=\" * 70)\n        print(\"CLEANUP OPTIONS\")\n        print(\"=\" * 70)\n\n        if dry_run:\n            print(\"\\n\ud83d\udd0d DRY RUN MODE - No skills will be deleted\")\n            print(\"\\nTo delete the notebook skills, uncomment and run:\")\n            print(\"-\" * 40)\n            print(\"# review_and_cleanup_skills(client, dry_run=False)\")\n            print(\"-\" * 40)\n\n            print(\"\\nThis would delete:\")\n            for skill in notebook_skills:\n                print(f\"   \u2022 {skill['display_title']}\")\n        else:\n            print(\"\\n\u26a0\ufe0f DELETION MODE - Skills will be permanently removed\")\n            print(\"\\nDeleting notebook skills...\")\n\n            success_count = 0\n            for skill in notebook_skills:\n                if delete_skill(client, skill[\"skill_id\"]):\n                    print(f\"   \u2705 Deleted: {skill['display_title']}\")\n                    success_count += 1\n                else:\n                    print(f\"   \u274c Failed to delete: {skill['display_title']}\")\n\n            print(f\"\\n\ud83d\udcca Cleanup complete: {success_count}/{len(notebook_skills)} skills deleted\")\n\n    return {\n        \"total_skills\": len(all_skills),\n        \"notebook_skills\": len(notebook_skills),\n        \"other_skills\": len(other_skills),\n        \"notebook_skill_ids\": [s[\"skill_id\"] for s in notebook_skills],\n    }\n\n\n# Run the review (in dry-run mode by default)\nprint(\"Reviewing your custom skills workspace...\")\ncleanup_summary = review_and_cleanup_skills(client, dry_run=True)\n\n# Store skill IDs for potential cleanup\nif cleanup_summary[\"notebook_skill_ids\"]:\n    skills_to_cleanup = cleanup_summary[\"notebook_skill_ids\"]\n    print(f\"\\n\ud83d\udca1 Tip: {len(skills_to_cleanup)} skill(s) can be cleaned up when you're done testing\")\n\n# UNCOMMENT THE LINE BELOW TO ACTUALLY DELETE THE NOTEBOOK SKILLS:\n# review_and_cleanup_skills(client, dry_run=False)\n```\n\n---\n\n# Cell 36 (markdown)\n## 7. Best Practices & Production Tips {#best-practices}\n\n### Skill Design Principles\n\n1. **Single Responsibility**: Each skill should focus on one area of expertise\n2. **Clear Documentation**: SKILL.md should be comprehensive yet concise\n3. **Error Handling**: Scripts should handle edge cases gracefully\n4. **Version Control**: Use Git to track skill changes\n5. **Testing**: Always test skills before production deployment\n\n### Directory Structure Best Practices\n\n```\ncustom_skills/\n\u251c\u2500\u2500 financial_analyzer/       # Single purpose, clear naming\n\u2502   \u251c\u2500\u2500 SKILL.md             # Under 5,000 tokens\n\u2502   \u251c\u2500\u2500 scripts/             # Modular Python/JS files\n\u2502   \u2514\u2500\u2500 tests/               # Unit tests for scripts\n\u251c\u2500\u2500 brand_guidelines/         # Organizational standards\n\u2502   \u251c\u2500\u2500 SKILL.md\n\u2502   \u251c\u2500\u2500 REFERENCE.md         # Additional documentation\n\u2502   \u2514\u2500\u2500 assets/              # Logos, templates\n```\n\n### Performance Optimization\n\n| Strategy | Impact | Implementation |\n|----------|--------|----------------|\n| **Minimal Frontmatter** | Faster skill discovery | name: 64 chars, description: 1024 chars |\n| **Lazy Loading** | Reduced token usage | Reference files only when needed |\n| **Skill Composition** | Avoid duplication | Combine skills vs. mega-skill |\n| **Caching** | Faster responses | Reuse skill containers |\n\n### Security Considerations\n\n- **API Keys**: Never hardcode credentials in skills\n- **Data Privacy**: Don't include sensitive data in skill files\n- **Access Control**: Skills are workspace-specific\n- **Validation**: Sanitize inputs in scripts\n- **Audit Trail**: Log skill usage for compliance\n\n---\n\n# Cell 37 (markdown)\n## Next Steps\n\n\ud83c\udf89 **Congratulations!** You've learned how to create, deploy, and manage custom skills for Claude.\n\n### What You've Learned\n\n- \u2705 Custom skill architecture and requirements\n- \u2705 Creating skills with SKILL.md and Python scripts\n- \u2705 Uploading skills via the API\n- \u2705 Combining custom and Anthropic skills\n- \u2705 Best practices for production deployment\n- \u2705 Troubleshooting common issues\n\n### Continue Your Journey\n\n1. **Experiment**: Modify the example skills for your use cases\n2. **Build**: Create skills for your organization's workflows\n3. **Optimize**: Monitor token usage and performance\n4. **Share**: Document your skills for team collaboration\n\n### Resources\n\n- [Claude API Documentation](https://docs.anthropic.com/en/api/messages)\n- [Skills Documentation](https://docs.claude.com/en/docs/agents-and-tools/agent-skills/overview)\n- [Best Practices](https://docs.claude.com/en/docs/agents-and-tools/agent-skills/best-practices)\n- [Files API Documentation](https://docs.claude.com/en/api/files-content)\n- Example Skills Repository (coming soon)\n\n### Skill Ideas to Try\n\n- \ud83d\udcca **Data Pipeline**: ETL workflows with validation\n- \ud83d\udcdd **Document Templates**: Contracts, proposals, reports\n- \ud83d\udd0d **Code Review**: Style guides and best practices\n- \ud83d\udcc8 **Analytics Dashboard**: KPI tracking and visualization\n- \ud83e\udd16 **Automation Suite**: Repetitive task workflows\n\nHappy skill building! \ud83d\ude80\n\n---\n\n"
  ]
}