# Bug: .gitignore is allowing log directory in PRs

## Metadata
issue_number: `24`
adw_id: `f5a0a3ca`
issue_json: `{"number": "24", "title": ".gitignore is allowing log directory in PRs", "body": "bug\nadw_plan_build_iso\n\n\".gitignore\" file isn't working correctly and it's allowing /log directory into MRs and PRs. Fix the issue and make sure \".gitignore\" is accurately ignoring log files. This includes log files in the main directory and any and all sub-directories once completed let's make sure that the log directory that currently exists and is currently being tracked anywhere in source code is removed. Keep in mind these are logs specifically related to chats with Claude, not logs on features and logs on workflows. Those are critical. "}`

## Bug Description
The `.gitignore` file has a pattern `logs/` on line 50, but the `logs/` directory containing Claude Code hook-generated JSON files is being tracked by Git. Multiple log files in the `logs/` directory are showing as modified in `git status` and are present in the Git index (`git ls-files logs/` shows 7 tracked files). These are Claude chat-related logs (chat.json, post_tool_use.json, pre_tool_use.json, session_start.json, stop.json, subagent_stop.json, user_prompt_submit.json) that should not be committed to the repository.

## Problem Statement
The `.gitignore` pattern `logs/` is not preventing the `logs/` directory from being tracked because these files were added to Git before the `.gitignore` rule was in place. Git only ignores untracked files; files that are already in the Git index remain tracked even if they match `.gitignore` patterns.

## Solution Statement
1. Untrack all currently tracked files in the `logs/` directory using `git rm --cached`
2. Verify the `.gitignore` pattern `logs/` is correctly formatted (it is on line 50)
3. Commit the removal of tracked log files to ensure they are no longer part of the repository
4. Verify that the `logs/` directory is now properly ignored going forward

## Steps to Reproduce
1. Run `git status` in the project root
2. Observe that files in `logs/` directory show as modified:
   - logs/chat.json
   - logs/post_tool_use.json
   - logs/pre_tool_use.json
   - logs/session_start.json
   - logs/stop.json
   - logs/subagent_stop.json
   - logs/user_prompt_submit.json
3. Run `git ls-files logs/` and observe 7 tracked files
4. Confirm `.gitignore` contains `logs/` pattern (line 50)

## Root Cause Analysis
The root cause is that the log files were committed to the Git repository before the `.gitignore` rule was added or the rule was added after files were already tracked. Git does not retroactively ignore files that are already in the index. The `.gitignore` pattern itself (`logs/` on line 50) is correct and will prevent new files from being tracked, but it does not affect already-tracked files.

These logs are generated by Claude Code hooks located in `/Users/ameno/.claude/hooks/`:
- `stop.py` (lines 173-175, 192) - creates logs/stop.json
- `subagent_stop.py` (lines 95-97, 114) - creates logs/subagent_stop.json
- And other hooks that write to logs/ directory (pre_tool_use.py, post_tool_use.py, session_start.py, user_prompt_submit.py, notification.py, pre_compact.py)

## Relevant Files
Use these files to fix the bug:

- `.gitignore` - Already contains the correct pattern `logs/` on line 50; no changes needed
- `logs/chat.json` - Claude chat logs, needs to be untracked and removed from Git
- `logs/post_tool_use.json` - Hook logs, needs to be untracked and removed from Git
- `logs/pre_tool_use.json` - Hook logs, needs to be untracked and removed from Git
- `logs/session_start.json` - Hook logs, needs to be untracked and removed from Git
- `logs/stop.json` - Hook logs, needs to be untracked and removed from Git
- `logs/subagent_stop.json` - Hook logs, needs to be untracked and removed from Git
- `logs/user_prompt_submit.json` - Hook logs, needs to be untracked and removed from Git

### New Files
None - this bug fix only removes tracked files from Git.

## Step by Step Tasks
IMPORTANT: Execute every step in order, top to bottom.

### 1. Verify Current State
- Run `git ls-files logs/` to list all currently tracked files in logs/
- Run `git status` to see modified log files
- Verify `.gitignore` contains the `logs/` pattern

### 2. Remove Tracked Log Files from Git Index
- Run `git rm --cached logs/*.json` to untrack all JSON files in logs/
- This removes files from Git's index but keeps them in the working directory

### 3. Verify Files Are Untracked
- Run `git ls-files logs/` to confirm no files are listed (should be empty)
- Run `git status` to confirm files are no longer tracked
- Verify that logs/ directory and its contents still exist in the filesystem

### 4. Commit the Changes
- Create a commit with message: "fix: untrack logs/ directory from git (issue #24)"
- This commit will record the removal of log files from version control

### 5. Test Gitignore is Working
- Modify one of the log files in logs/ directory
- Run `git status` and verify the logs/ directory does not appear
- Confirm that `.gitignore` is now effectively preventing logs/ from being tracked

## Validation Commands
Execute every command to validate the bug is fixed with zero regressions.

```bash
# Verify no files in logs/ are tracked
git ls-files logs/
# Expected: (no output)

# Verify logs/ directory exists but is ignored
ls logs/
# Expected: List of .json files

# Verify git status shows logs/ as ignored
git status
# Expected: logs/ should not appear in modified or untracked files

# Verify .gitignore contains logs/ pattern
grep "^logs/$" .gitignore
# Expected: logs/

# Test that new files in logs/ are ignored
touch logs/test.json
git status
# Expected: logs/test.json should not appear
rm logs/test.json

# Verify no other log patterns are affected
git ls-files | grep -E '\.(log|LOG)$'
# Expected: (no output - only if no other log files exist, or list legitimate log files that should be tracked)

# Confirm commit is recorded
git log -1 --oneline
# Expected: Should show commit message about untracking logs/
```

## Notes
- The `.gitignore` file pattern `logs/` (line 50) is already correct and does not need modification
- The issue is not with `.gitignore` itself, but with files that were already tracked before the ignore rule took effect
- Using `git rm --cached` removes files from Git's tracking without deleting them from the filesystem
- The logs are generated by Claude Code hooks and will continue to be created, but will now be properly ignored
- This fix ensures that Claude chat-related logs stay local and are not pushed to PRs/MRs
- The comment in `.gitignore` line 49 correctly identifies these as "Claude hooks logs"
