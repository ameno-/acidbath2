{
  "session_id": "3fec9433-0444-4c0b-849c-41d30ec9e00b",
  "prompts": [
    "# IDENTITY and PURPOSE\n\nYou are an expert at extracting numerical data, metrics, statistics, and quantitative claims from content. You excel at identifying concrete numbers that support arguments and provide evidence.\n\n# STEPS\n\n- Read through the entire content carefully\n- Identify all numerical claims, statistics, percentages, metrics, and benchmarks\n- Extract the specific numbers with their full context\n- Capture what each number represents and why it matters\n- Note the source or authority behind each metric if mentioned\n- Distinguish between claimed vs measured vs estimated numbers\n- Include units and time periods for all metrics\n\n# OUTPUT INSTRUCTIONS\n\n- Output a markdown list with each number as a separate entry\n- For each number, provide:\n  - The specific metric (e.g., \"95% accuracy\", \"10x performance improvement\")\n  - Full context explaining what was measured\n  - Why this number matters or what it demonstrates\n  - Source or citation if available\n- Group related numbers together when appropriate\n- Sort by significance or logical flow\n- Use clear, concise language\n- Include confidence level if the source indicates uncertainty\n\n# EXAMPLES\n\n## Example Output\n\n- **95% accuracy**: The model achieved 95% accuracy on the ImageNet benchmark, representing state-of-the-art performance for this task class. This demonstrates the model can reliably classify images in production use cases.\n\n- **10x faster training**: Training time reduced from 100 hours to 10 hours using distributed training across 8 GPUs. This acceleration makes rapid iteration possible during model development.\n\n- **2.3M downloads**: The library has been downloaded 2.3 million times on npm in the last month, indicating strong community adoption and active maintenance.\n\n- **$50/month cost**: Running the service costs approximately $50/month for typical usage (100K API calls), making it cost-effective for small to medium applications.\n\n# OUTPUT FORMAT\n\nOutput only the markdown list. Do not include explanatory text before or after the list.\n\n\n# INPUT\n\n# Cell 1 (markdown)\n# Using Vision with Tools\n\n---\n\n# Cell 2 (markdown)\nIn this recipe, we'll demonstrate how to combine Vision with tool use to analyze an image of a nutrition label and extract structured nutrition information using a custom tool.\n\n---\n\n# Cell 3 (markdown)\n## Setup\nFirst, let's install the necessary libraries and set up the Claude API client:\n\n---\n\n# Cell 4 (code)\n```python\n%pip install anthropic IPython\n```\n\n---\n\n# Cell 5 (code)\n```python\nimport base64\n\nfrom anthropic import Anthropic\nfrom IPython.display import Image\n\nclient = Anthropic()\nMODEL_NAME = \"claude-opus-4-1\"\n```\n\n---\n\n# Cell 6 (markdown)\n# Defining the Nutrition Label Extraction Tool\nNext, we'll define a custom tool called \"print_nutrition_info\" that extracts structured nutrition information from an image. The tool has properties for calories, total fat, cholesterol, total carbs, and protein:\n\n---\n\n# Cell 7 (code)\n```python\nnutrition_tool = {\n    \"name\": \"print_nutrition_info\",\n    \"description\": \"Extracts nutrition information from an image of a nutrition label\",\n    \"input_schema\": {\n        \"type\": \"object\",\n        \"properties\": {\n            \"calories\": {\"type\": \"integer\", \"description\": \"The number of calories per serving\"},\n            \"total_fat\": {\n                \"type\": \"integer\",\n                \"description\": \"The amount of total fat in grams per serving\",\n            },\n            \"cholesterol\": {\n                \"type\": \"integer\",\n                \"description\": \"The amount of cholesterol in milligrams per serving\",\n            },\n            \"total_carbs\": {\n                \"type\": \"integer\",\n                \"description\": \"The amount of total carbohydrates in grams per serving\",\n            },\n            \"protein\": {\n                \"type\": \"integer\",\n                \"description\": \"The amount of protein in grams per serving\",\n            },\n        },\n        \"required\": [\"calories\", \"total_fat\", \"cholesterol\", \"total_carbs\", \"protein\"],\n    },\n}\n```\n\n---\n\n# Cell 8 (markdown)\n## Analyzing the Nutrition Label Image\nNow, let's put it all together. We'll load a nutrition label image, pass it to Claude along with a prompt, and have Claude call the \"print_nutrition_info\" tool to extract the structured nutrition information into a nicely formatted JSON object:\n\n---\n\n# Cell 9 (code)\n```python\nImage(filename=\"../images/tool_use/nutrition_label.png\")\n```\n\n**Output:**\n```\n<IPython.core.display.Image object>\n```\n\n---\n\n# Cell 10 (code)\n```python\ndef get_base64_encoded_image(image_path):\n    with open(image_path, \"rb\") as image_file:\n        binary_data = image_file.read()\n        base_64_encoded_data = base64.b64encode(binary_data)\n        base64_string = base_64_encoded_data.decode(\"utf-8\")\n        return base64_string\n\n\nmessage_list = [\n    {\n        \"role\": \"user\",\n        \"content\": [\n            {\n                \"type\": \"image\",\n                \"source\": {\n                    \"type\": \"base64\",\n                    \"media_type\": \"image/png\",\n                    \"data\": get_base64_encoded_image(\"../images/tool_use/nutrition_label.png\"),\n                },\n            },\n            {\n                \"type\": \"text\",\n                \"text\": \"Please print the nutrition information from this nutrition label image.\",\n            },\n        ],\n    }\n]\n\nresponse = client.messages.create(\n    model=MODEL_NAME, max_tokens=4096, messages=message_list, tools=[nutrition_tool]\n)\n\nif response.stop_reason == \"tool_use\":\n    last_content_block = response.content[-1]\n    if last_content_block.type == \"tool_use\":\n        tool_name = last_content_block.name\n        tool_inputs = last_content_block.input\n        print(f\"=======Claude Wants To Call The {tool_name} Tool=======\")\n        print(tool_inputs)\n\nelse:\n    print(\"No tool was called. This shouldn't happen!\")\n```\n\n**Output:**\n```\n=======Claude Wants To Call The print_nutrition_info Tool=======\n{'calories': 200, 'total_fat': 15, 'cholesterol': 30, 'total_carbs': 30, 'protein': 5}\n\n```\n\n---\n\n"
  ]
}