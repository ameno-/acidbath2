name: adw_review_iso
description: AI Developer Workflow for agentic review in isolated worktrees with screenshot capture and issue resolution
category: testing
effects:
  creates_worktree: false
  creates_branch: false
  creates_commits: true
  posts_github: true
  uploads_artifacts: true
module_dependencies:
  - adw_modules.agent
  - adw_modules.state
  - adw_modules.git_ops
  - adw_modules.github
  - adw_modules.workflow_ops
  - adw_modules.utils
  - adw_modules.data_types
  - adw_modules.r2_uploader
  - adw_modules.worktree_ops
env_vars:
  required:
    - ANTHROPIC_API_KEY
    - GITHUB_TOKEN
  optional:
    - R2_BUCKET_NAME
    - R2_ACCESS_KEY_ID
    - R2_SECRET_ACCESS_KEY
    - R2_ENDPOINT_URL
    - R2_PUBLIC_URL
validation:
  import_test:
    enabled: true
    timeout: 30
  cli_test:
    enabled: true
    command: ""
    expected_exit_code: 1
  dry_run:
    enabled: false
notes: |
  This workflow REQUIRES that adw_plan_iso.py or adw_patch_iso.py has been run first
  to create the worktree. It cannot create worktrees itself.

  Workflow steps:
  1. Load state and validate worktree exists
  2. Find spec file from worktree
  3. Review implementation against specification
  4. Capture screenshots of critical functionality
  5. Upload screenshots to R2 (if configured)
  6. Optionally resolve blocker issues (unless --skip-resolution is set)
  7. Commit review results in worktree
  8. Push and update PR

  Usage:
    uv run adw_review_iso.py <issue-number> <adw-id> [--skip-resolution]
